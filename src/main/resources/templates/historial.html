<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head>
        <meta charset="UTF-8"></meta>
        <meta name="viewport" content="width=device-width, initial-scale=1">   
        <link href="http://fonts.cdnfonts.com/css/lexend-deca" rel="stylesheet">
        <title>Historial de operaciones</title>
		<link rel="icon" href="/img/icon_pagina.png">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"></link>
        <link href="/css/general.css" rel="stylesheet" id="general-css"></link>
		<link href="/css/lst.css" rel="stylesheet" id="general-css"></link>
		<link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" >
		<script src="/js/jquery.validate.js"></script>
		<script src="/js/bootstrap.min.js"></script>
		<script src="/js/jquery.min.js"></script>
		<script src="/js/jquery.dataTables.min.js"></script>
		<script src="/js/dataTables.bootstrap4.min.js"></script>
    </head>
    <body>
    	<div th:replace="fragments/navbar :: nav"></div>
        <div class="container cont1">
				<div class="form-group row titulo" style="margin-bottom: 1.5%;">
					<div class="col-sm-6 coltboton">
						<a th:href="@{/inicio/}" class="btn btn-primary btninvertido">Regresar</a>
					</div>
					<div class="col-sm-6 colttexto">
						<h1>Historial de operaciones</h1>
					</div>
					<div class="col-sm-6 coltboton">
						<a th:href="@{/limpiar/}" class="btn btn-primary">Limpiar</a>
					</div>
				</div>
				<div class="perfil">
					<table class="table table-hover table-striped">
						<thead>
							<tr>
								<th class="text-center">ACCIÓN</th>
								<th class="text-center">VALOR N.</th>
								<th class="text-center">VALOR C.</th>
								<th class="text-center">TASA I.</th>
								<th class="text-center">TASA D.</th>
								<th class="text-center">EMISIÓN</th>
								<th class="text-center">AÑOS</th>
								<th class="text-center">CAPIT.</th>
								<th class="text-center">BONO</th>
								<th class="text-center">PRIMA</th>
								<th class="text-center">FLOTA.</th>
								<th class="text-center">CAVALI</th>
								<th class="text-center">X</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="o: ${listaOperaciones}">
								<td th:if="${o.capitalizacion} AND ${tipoTasa.equals('Nominal')} OR !${o.capitalizacion} AND ${tipoTasa.equals('Efectiva')}" class="text-center celda" ><a th:href="@{/bonos/cargar/?id=}+${o.idOperacion}"><span th:text="${#dates.format(o.fechaAccion, 'dd/MM/yyyy HH:mm')}"></span></a></td>
								<td th:unless="${o.capitalizacion} AND ${tipoTasa.equals('Nominal')} OR !${o.capitalizacion} AND ${tipoTasa.equals('Efectiva')}" class="text-center celda" ><span th:text="${#dates.format(o.fechaAccion, 'dd/MM/yyyy HH:mm')}"></span></td>
								<td class="text-center celda" th:text="${moneda} + ${o.nominal}"></td>
								<td class="text-center celda" th:text="${moneda} + ${o.comercial}"></td>
								<td class="text-center celda" th:text="${o.tasaInteres} + '%'"></td>
								<td class="text-center celda" th:text="${o.tasaDescuento} + '%'"></td>
								<td class="text-center celda" th:text="${#dates.format(o.fechaEmision, 'dd/MM/yyyy')}"></td>
								<td class="text-center celda" th:text="${o.anios}"></td>
								<td th:if="${o.capitalizacion}" class="text-center celda" th:text="${o.capitalizacion.nombre}"></td>
								<td th:unless="${o.capitalizacion}" class="text-center celda">No</td>
								<td class="text-center celda" th:text="${o.frecuencia.nombre}"></td>
								<td class="text-center celda" th:text="${o.prima} + '%'"></td>
								<td class="text-center celda" th:text="${o.flotacion} + '%'"></td>
								<td class="text-center celda" th:text="${o.cavali} + '%'"></td>
								<td class="text-center celda" style="font-size: 11pt; padding-top: 7px;"><a th:href="@{/bonos/eliminar/?id=}+${o.idOperacion}"><span class="glyphicon glyphicon-remove-circle"></span></a></td>
							</tr>
						</tbody>
					</table> 	
					<h4 th:text="${mensaje}" class="error"></h4>
				</div>
        </div>
       	<script>$('table').DataTable({ info: false, searching: false, lengthChange: false, pageLength: 10, 
		dom: 't<"pag2"f><"pag"p>', language: { emptyTable: "No tiene operaciones registradas"}, oLanguage: { oPaginate: { sPrevious: "Anterior", sNext: "Siguiente"}} });</script>
    	<div th:replace="fragments/footer :: footer"></div>
	</body>
</html>